<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">ACXIOM Technologies</a>
    <div class="d-flex ms-auto align-items-center">
      <span class="me-3 text-white">Hello, {{username}}</span>
      <button class="btn btn-outline-light btn-sm" (click)="logout()">Logout</button>
    </div>
  </div>
</nav>

<!-- Form -->
<div class="container mt-4">
  <div class="card p-3 mb-4">
    <h5>Submit Your Details</h5>
    <form (ngSubmit)="onSubmit()">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Name</label>
          <input class="form-control" [(ngModel)]="user.name" name="name" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Mobile No</label>
          <input class="form-control" [(ngModel)]="user.mobile" name="mobile" required>
        </div>
        <div class="col-md-12">
          <label class="form-label">Address</label>
          <input class="form-control" [(ngModel)]="user.address" name="address">
        </div>
        <div class="col-md-6">
          <label class="form-label">Skills</label>
          <input class="form-control" [(ngModel)]="user.skills" name="skills">
        </div>
        <div class="col-md-6">
          <label class="form-label">Hobbies</label>
          <input class="form-control" [(ngModel)]="user.hobbies" name="hobbies">
        </div>
        <div class="col-md-12">
          <label class="form-label">Photo (image/pdf)</label>
          <input type="file" class="form-control" (change)="onPhotoUpload($event)">
        </div>
      </div>
      <div class="mt-3">
        <button class="btn btn-success" type="submit">Submit</button>
      </div>
    </form>
  </div>

  <!-- Submitted Details Table -->
  <div *ngIf="submittedUsers.length > 0" class="card p-3">
    <h5>Submitted Details</h5>
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Name</th>
          <th>Mobile</th>
          <th>Address</th>
          <th>Skills</th>
          <th>Hobbies</th>
          <th>Photo</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of submittedUsers">
          <td>{{u.name}}</td>
          <td>{{u.mobile}}</td>
          <td>{{u.address}}</td>
          <td>{{u.skills}}</td>
          <td>{{u.hobbies}}</td>
          <td>
            <ng-container *ngIf="u.photoUrl">
              <a *ngIf="u.photoName?.endsWith('.pdf')" [href]="u.photoUrl" target="_blank">{{u.photoName}}</a>
              <img *ngIf="!u.photoName?.endsWith('.pdf')" [src]="u.photoUrl" alt="photo" width="60">
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
    <button class="btn btn-primary mt-2" (click)="downloadCSV()">Download CSV</button>
  </div>
</div>
